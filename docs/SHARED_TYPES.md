# κ³µμ© νƒ€μ… (Shared Types)

## λ©μ 

μ—¬λ¬ μΈν„°νμ΄μ¤μ—μ„ λ™μΌν• νƒ€μ… μ •μλ¥Ό κ³µμ ν•  λ•, μ¤‘λ³µμ„ μ κ±°ν•κ³  μΌκ΄€μ„±μ„ μ μ§€ν•κΈ° μ„ν• κ³µμ© νƒ€μ… κ΄€λ¦¬ μ²΄κ³„.

## μ›μΉ™

### 1. **λ‹¨μΌ μ§„μ‹¤ μ›μ² (Single Source of Truth, SSOT)**

κ³µμ© νƒ€μ…μ€ **shared/** λ””λ ‰ν† λ¦¬μ—μ„λ§ μ •μν•λ©°, κΈ°λ¥(features/) λ° μΈν„°νμ΄μ¤(interfaces/) λ¬Έμ„λ” **μ°Έμ΅°λ§** ν•΄μ•Ό ν•©λ‹λ‹¤.

**ν•µμ‹¬ κ·μΉ™:**
- β… **μ •μ (Definition)**: `shared/` λ””λ ‰ν† λ¦¬μ—μ„λ§ νƒ€μ… μ •μ ν—μ©
- β… **μ°Έμ΅° (Reference)**: `features/`, `interfaces/` λ¬Έμ„μ—μ„λ” μ°Έμ΅° λ§ν¬λ§ μ‚¬μ©
- β **μ¤‘λ³µ μ •μ κΈμ§€**: κ°™μ€ νƒ€μ…μ„ μ—¬λ¬ κ³³μ—μ„ μ •μν•λ©΄ μ• λ¨

**μ°Έμ΅° λ°©λ²•:**
```markdown
---
shared_types:
  - "03--04_06--05"
---

## νƒ€μ… μ •μ

> π”— **κ³µμ© νƒ€μ…**: `LayerNode`λ” [../shared/03--04_06--05.md](../shared/03--04_06--05.md) μ°Έμ΅°
```

### 2. **μ°Έμ΅° κΈ°λ° κ³µμ **

κ³µμ© νƒ€μ…μ΄λΌ ν•΄μ„ λ¨λ“  κ³³μ—μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, λ…μ‹μ μΌλ΅ μ°Έμ΅°ν•λ” μΈν„°νμ΄μ¤λ§ μ‚¬μ©

### 3. **λ™μΌ μ›μ² λ°μ΄ν„° (Same Source Data)**

μ™„μ „ν λ™μΌν• νƒ€μ… κµ¬μ΅°λΏ μ•„λ‹λΌ, κ°™μ€ μ›μ²μ—μ„ νμƒλ λ°μ΄ν„°λ„ κ³µμ© νƒ€μ…μΌλ΅ κ΄€λ¦¬
- μ „μ²΄ ν•„λ“ μ‚¬μ©: `ImageAsset` μ „μ²΄ μ‚¬μ©
- μ„ νƒμ  ν•„λ“ μ‚¬μ©: `Pick<ImageAsset, 'id' | 'name'>` ν•νƒλ΅ μΌλ¶€λ§ μ‚¬μ©
- **ν•µμ‹¬**: μ›μ²μ΄ κ°™μΌλ©΄ κ³µμ© νƒ€μ…, ν•„λ“ κ°μλ” λ¬΄κ΄€

### 4. **μ–‘λ°©ν–¥ μ°Έμ΅° μΌκ΄€μ„±**

κ³µμ© νƒ€μ…κ³Ό μΈν„°νμ΄μ¤λ” μ„λ΅λ¥Ό μ°Έμ΅°ν•΄μ•Ό ν•¨
- κ³µμ© νƒ€μ… β†’ μΈν„°νμ΄μ¤: `interfaces` ν•„λ“μ— λ…μ‹
- μΈν„°νμ΄μ¤ β†’ κ³µμ© νƒ€μ…: `shared_types` ν•„λ“μ— λ…μ‹

### 5. **λ¶λ³€μ„± μ μ§€**

κ³µμ© νƒ€μ… λ³€κ²½ μ‹ λ¨λ“  μ°Έμ΅° μΈν„°νμ΄μ¤ μν–¥ λ¶„μ„ ν•„μ

## λ…λ… κ·μΉ™

### κΈ°λ³Έ ν•μ‹
```
{A}--{B}_{B}--{C}.md
```

- `_` (underscore): μ‰Όν‘(`,`)λ¥Ό λ€μ²΄ν•λ” κµ¬λ¶„μ
- λ‘ κ° μ΄μƒμ `{X}--{Y}` μμ΄ `_`λ΅ μ—°κ²°λ¨
- `_`κ°€ ν¬ν•¨λ νμΌλ…μΌλ΅ κ³µμ© νƒ€μ… λ¬Έμ„μ„μ„ μ‹λ³„

### μ •λ ¬ κ·μΉ™
κ³µμ© νƒ€μ…μ€ AND κµ¬μ΅°μ΄λ―€λ΅, κµ¬μ„± μ”μ†μ μμ„λ” μƒκ΄€μ—†μ. λ”°λΌμ„ μ•νλ²³/μ«μ μμΌλ΅ μ •λ ¬:

```
# μ¬λ°”λ¥Έ μμ‹
01--02_02--03.md  (O)
02--03_01--02.md  (X) - μ •λ ¬λμ§€ μ•μ

# λ™μΌν• κµ¬μ„±
01--02_01--03.md
01--03_01--02.md  (X) - μ„μ™€ λ™μΌν•λ―€λ΅ 01--02_01--03.md μ‚¬μ©
```

### μ •λ ¬ μ•κ³ λ¦¬μ¦
1. κ° `{A}--{B}` μμ„ μ¶”μ¶
2. κ° μμ„ μ‚¬μ „μμΌλ΅ μ •λ ¬
3. μ •λ ¬λ μλ“¤μ„ `_`λ΅ μ—°κ²°

### μμ‹

```
# Case 1: λ‘ μΈν„°νμ΄μ¤κ°€ κ³µν†µ νƒ€μ… κ³µμ 
01--02.mdμ™€ 02--03.mdκ°€ λ™μΌν• νƒ€μ…μ„ κ³µμ 
β†’ 01--02_02--03.md

# Case 2: μ„Έ μΈν„°νμ΄μ¤κ°€ κ³µν†µ νƒ€μ… κ³µμ 
01--02.md, 02--03.md, 03--04.mdκ°€ λ™μΌν• νƒ€μ…μ„ κ³µμ 
β†’ 01--02_02--03_03--04.md

# Case 3: Aκ°€ B, Cμ™€ κ°κ° λ‹¤λ¥Έ κ³µν†µ νƒ€μ… κ³µμ 
01--02.mdμ™€ 01--03.mdκ°€ Type1 κ³µμ  β†’ 01--02_01--03.md (Type1)
01--02.mdμ™€ 02--03.mdκ°€ Type2 κ³µμ  β†’ 01--02_02--03.md (Type2)
μ΄ λ‘μ€ λ³„λ„ λ¬Έμ„!

# Case 4: μ„ νƒμ  ν•„λ“ μ‚¬μ© (Same Source Data)
01--02.md: ImageAsset μ „μ²΄ μ‚¬μ©
02--03.md: Pick<ImageAsset, 'id' | 'name' | 'width' | 'height' | 'blob'> μ‚¬μ©
02--05.md: ImageAsset μ „μ²΄ μ‚¬μ©
β†’ 01--02_02--03_02--05.md (λ™μΌ μ›μ² λ°μ΄ν„°)

# Case 5: μ μ‚¬ν•μ§€λ§ λ‹¤λ¥Έ μ›μ² (λ³„λ„ νƒ€μ…)
03--04.md: { id: string; name: string; } (LayerNodeμ—μ„ νμƒ)
05--06.md: { id: string; name: string; } (CanvasElementμ—μ„ νμƒ)
β†’ λ³„λ„ λ¬Έμ„ μ μ§€ (μ›μ²μ΄ λ‹¤λ¦„)
```

## νμΌ κµ¬μ΅°

### μ„μΉ
```
tasks/
β”β”€β”€ shared/              # κ³µμ© νƒ€μ… λ¬Έμ„λ“¤
β”‚   β”β”€β”€ 01--02_02--03.md
β”‚   β””β”€β”€ 01--05_02--05.md
β”β”€β”€ interfaces/          # κ°λ³„ μΈν„°νμ΄μ¤
β”‚   β”β”€β”€ 01--02.md
β”‚   β”β”€β”€ 02--03.md
β”‚   β””β”€β”€ ...
β””β”€β”€ features/
```

### Frontmatter ν•μ‹

```markdown
---
interfaces:
  - "01--02"
  - "02--03"
type: "shared"
status: "defined"
---
```

**ν•„μ ν•„λ“:**
- `interfaces`: μ΄ κ³µμ© νƒ€μ…μ„ μ‚¬μ©ν•λ” μΈν„°νμ΄μ¤ λ©λ΅ (μ •λ ¬λ¨)
- `type`: ν•­μƒ "shared"
- `status`: "defined" | "deprecated"

## λ¬Έμ„ λ‚΄μ© κµ¬μ΅°

```markdown
---
interfaces:
  - "01--02"
  - "02--03"
  - "02--05"
type: "shared"
status: "defined"
---

# Shared Type: [νƒ€μ…λ…]

## μ‚¬μ© μΈν„°νμ΄μ¤
- **01--02** (ProjectManagement β†’ ImageLibrary): μ „μ²΄ ν•„λ“ μ‚¬μ©
- **02--03** (ImageLibrary β†’ Canvas): μ„ νƒμ  ν•„λ“ μ‚¬μ© (`id`, `name`, `width`, `height`, `blob`)
- **02--05** (ImageLibrary β†’ Database): μ „μ²΄ ν•„λ“ μ‚¬μ©

## νƒ€μ… μ •μ

\`\`\`typescript
interface ImageAsset {
  id: string;           // κ³ μ  μ‹λ³„μ (UUID v4)
  projectId: string;    // ν”„λ΅μ νΈ μ°Έμ΅°
  name: string;         // νμΌλ…
  path: string;         // μ›λ³Έ κ²½λ΅
  blob: Blob;           // μ΄λ―Έμ§€ λ°μ΄ν„°
  width: number;        // μ΄λ―Έμ§€ λ„λΉ„ (px)
  height: number;       // μ΄λ―Έμ§€ λ†’μ΄ (px)
  thumbnail: Blob;      // μΈλ„¤μΌ (200x200 μ΄ν•)
}
\`\`\`

### μ„ νƒμ  ν•„λ“ μ‚¬μ© (02--03)
`02--03` (ImageLibrary β†’ Canvas)μ€ λ“λκ·Έ μ΄λ²¤νΈμ—μ„ **μ„ νƒμ μΌλ΅ μΌλ¶€ ν•„λ“λ§ μ‚¬μ©**:

**μ‚¬μ© ν•„λ“:**
- `id`: λ μ΄μ–΄μ™€ μ—°κ²°ν•κΈ° μ„ν• μ‹λ³„μ
- `name`: λ μ΄μ–΄λ… μλ™ μƒμ„±
- `width`, `height`: μ΄κΈ° μΊ”λ²„μ¤ ν¬κΈ° μ„¤μ •
- `blob`: μ΄λ―Έμ§€ λ λ”λ§

**λ―Έμ‚¬μ© ν•„λ“:**
- `projectId`: Canvasλ” μ΄λ―Έ ν”„λ΅μ νΈ μ»¨ν…μ¤νΈ λ‚΄μ— μμ
- `path`: Canvasλ” μ›λ³Έ κ²½λ΅ λ¶ν•„μ”
- `thumbnail`: Canvasλ” μ›λ³Έ μ΄λ―Έμ§€ μ‚¬μ©

**λ™μΌ μ›μ² μ›μΉ™**: λ¨λ‘ `ImageAsset`μ—μ„ νμƒλλ―€λ΅ κ³µμ© νƒ€μ…μΌλ΅ κ΄€λ¦¬.

## λ¶λ³€ κ·μΉ™
- `id`λ” UUID v4 ν•μ‹
- `width`, `height` > 0
- `thumbnail`μ€ 200x200 μ΄ν•
- `blob`κ³Ό `thumbnail`μ€ Blob νƒ€μ…

## κ²€μ¦ μ΅°κ±΄
- `blob.type`μ€ image/* ν•μ‹ (PNG, JPG, JPEG, GIF, WebP, SVG)
- `projectId`λ” μ ν¨ν• Project.id
- `name`μ€ λΉ λ¬Έμμ—΄ λ¶κ°€
- `path`λ” μ›λ³Έ νμΌ κ²½λ΅ (ZIP: μƒλ€κ²½λ΅, Folder: μ λ€κ²½λ΅)

## λ³€κ²½ μ΄λ ¥
- 2025-01-22: 02--03 μ„ νƒμ  ν•„λ“ μ‚¬μ© λ…μ‹ μ¶”κ°€
- 2025-01-22: μ΄κΈ° μ •μ (01--02, 02--05)
```

## μΈν„°νμ΄μ¤ λ¬Έμ„ μμ •

κ³µμ© νƒ€μ… μƒμ„± ν›„, ν•΄λ‹Ή νƒ€μ…μ„ μ‚¬μ©ν•λ” μΈν„°νμ΄μ¤ λ¬Έμ„μ— μ°Έμ΅° μ¶”κ°€:

```markdown
---
from: "01_ProjectManagement"
to: "02_ImageLibrary"
type: "service"
status: "defined"
shared_types:
  - "01--02_02--03"  # μ°Έμ΅°ν•λ” κ³µμ© νƒ€μ…
---

# ProjectManagement β†’ ImageLibrary

## νƒ€μ… μ •μ

> π”— **κ³µμ© νƒ€μ…**: `ImageAsset`μ€ [01--02_02--03.md](../shared/01--02_02--03.md) μ°Έμ΅°

\`\`\`typescript
// κ°„μ†ν™”λ νƒ€μ… μ°Έμ΅°λ§ ν‘μ‹
type ImageSource = { type: 'zip'; file: File } | { type: 'folder'; handle: FileSystemDirectoryHandle };
\`\`\`
```

## μƒμ„± ν”„λ΅μ„Έμ¤

### 1. νƒ€μ… μ¤‘λ³µ λ° μ›μ² μ‹λ³„
```bash
# λ‹¨κ³„ 1-1: κµ¬μ΅°μ  λ™μΌμ„± κ²€μ‚¬
# ImageAssetμ΄ 01--02μ™€ 02--05μ—μ„ 100% λ™μΌν•κ² μ •μλ¨

# λ‹¨κ³„ 1-2: λ™μΌ μ›μ² λ°μ΄ν„° κ²€μ‚¬
# 02--03μ—μ„ ImageAssetμ μΌλ¶€ ν•„λ“λ§ μ‚¬μ©
# β†’ Pick<ImageAsset, 'id' | 'name' | 'width' | 'height' | 'blob'>
# β†’ μ›μ²μ΄ κ°™μΌλ―€λ΅ κ³µμ© νƒ€μ… ν›„λ³΄
```

### 2. κ³µμ© νƒ€μ… ν›„λ³΄ κ²€μ¦
**ν•„μ μ΅°κ±΄ (OR κ΄€κ³„):**
- **μ΅°κ±΄ A**: νƒ€μ… κµ¬μ΅°κ°€ 100% μΌμΉ
  - ν•„λ“λ…, νƒ€μ…, κ°μκ°€ λ¨λ‘ λ™μΌ
  - λ¶λ³€ κ·μΉ™κ³Ό κ²€μ¦ μ΅°κ±΄μ΄ λ™μΌ
- **μ΅°κ±΄ B**: λ™μΌ μ›μ²μ—μ„ νμƒ (Same Source Data)
  - κ°™μ€ νƒ€μ…μ„ μ°Έμ΅°ν•λ μΌλ¶€ ν•„λ“λ§ μ‚¬μ©
  - TypeScriptμ `Pick<T>`, `Omit<T>` λ“±μΌλ΅ ν‘ν„ κ°€λ¥
  - μλ―Έμ μΌλ΅ λ™μΌν• κ°λ…

**μ μ™Έ μ΅°κ±΄:**
- μ°μ—°ν κµ¬μ΅°κ°€ κ°™μ§€λ§ μλ―Έκ°€ λ‹¤λ¥Έ νƒ€μ…
- μ›μ²μ΄ λ‹¤λ¥Έ νƒ€μ… (μ: LayerNode vs CanvasElement)

### 3. κ³µμ© νƒ€μ… λ¬Έμ„ μƒμ„±
```bash
# 3-1. νμΌλ… μƒμ„± (μ •λ ¬ κ·μΉ™ μ μ©)
# μΈν„°νμ΄μ¤: 01--02, 02--03, 02--05
# μ •λ ¬: 01--02, 02--03, 02--05 (μ΄λ―Έ μ •λ ¬λ¨)
# νμΌλ…: 01--02_02--03_02--05.md

# 3-2. shared/ λ””λ ‰ν† λ¦¬μ— μƒμ„±
# tasks/shared/01--02_02--03_02--05.md

# 3-3. νƒ€μ… μ •μ λ° κ·μΉ™ μ‘μ„±
# - frontmatter: interfaces, type, status
# - μ‚¬μ© μΈν„°νμ΄μ¤: κ° μΈν„°νμ΄μ¤λ³„ μ‚¬μ© λ°©μ‹ λ…μ‹
# - νƒ€μ… μ •μ: μ „μ²΄ νƒ€μ… + μ£Όμ„
# - μ„ νƒμ  ν•„λ“ μ‚¬μ©: Pick μ‚¬μ© μΈν„°νμ΄μ¤ μ„¤λ…
# - λ¶λ³€ κ·μΉ™ λ° κ²€μ¦ μ΅°κ±΄
```

### 4. μ°Έμ΅° μ—…λ°μ΄νΈ
```bash
# 4-1. μΈν„°νμ΄μ¤ λ¬Έμ„ frontmatterμ— shared_types μ¶”κ°€
# interfaces/01--02.md
# shared_types:
#   - "01--02_02--03_02--05"

# 4-2. νƒ€μ… μ •μ μ„Ήμ…μ— μ°Έμ΅° λ§ν¬ μ¶”κ°€
# > π”— **κ³µμ© νƒ€μ…**: `ImageAsset`μ€ [01--02_02--03_02--05.md](../shared/01--02_02--03_02--05.md) μ°Έμ΅°

# 4-3. μ¤‘λ³µ μ •μ μ κ±°
# interface ImageAsset { ... } μ‚­μ 

# 4-4. μ„ νƒμ  μ‚¬μ© μΈν„°νμ΄μ¤λ” Pick λ…μ‹
# interfaces/02--03.md
# > **μ„ νƒμ  μ‚¬μ©**: `id`, `name`, `width`, `height`, `blob` ν•„λ“λ§ μ‚¬μ©
# imageAsset: Pick<ImageAsset, 'id' | 'name' | 'width' | 'height' | 'blob'>
```

### 5. μ–‘λ°©ν–¥ μ°Έμ΅° κ²€μ¦
```bash
# 5-1. κ³µμ© νƒ€μ… β†’ μΈν„°νμ΄μ¤ ν™•μΈ
# shared/01--02_02--03_02--05.mdμ interfacesμ— 01--02, 02--03, 02--05 ν¬ν•¨

# 5-2. μΈν„°νμ΄μ¤ β†’ κ³µμ© νƒ€μ… ν™•μΈ
# interfaces/01--02.mdμ shared_typesμ— "01--02_02--03_02--05" ν¬ν•¨
# interfaces/02--03.mdμ shared_typesμ— "01--02_02--03_02--05" ν¬ν•¨
# interfaces/02--05.mdμ shared_typesμ— "01--02_02--03_02--05" ν¬ν•¨
```

## κ²€μ¦ κ·μΉ™

### validate.sh ν™•μ¥

#### 5-1. κ³µμ© νƒ€μ… νμΌλ… κ²€μ¦
```bash
# κΈ°λ³Έ ν•μ‹ κ²€μ¦
- _ ν¬ν•¨ μ—¬λ¶€ ν™•μΈ (κ³µμ© νƒ€μ… μ‹λ³„μ)
- κ° μμ΄ XX--YY ν•μ‹μΈμ§€ ν™•μΈ (μ •κ·μ‹: ^[0-9]{2}--[0-9]{2}$)
- μ¤‘λ³µ μ ν™•μΈ (μ: 01--02_01--02)
- μ •λ ¬ μμ„ ν™•μΈ (μ•νλ²³μ)

# Frontmatter κ²€μ¦
- interfaces ν•„λ“ μ΅΄μ¬ ν™•μΈ
- interfaces κ°μμ™€ νμΌλ… μ κ°μ μΌμΉ ν™•μΈ
- νμΌλ…μ κ° μμ΄ interfacesμ— μ΅΄μ¬ ν™•μΈ
- interfaces λ°°μ—΄μ΄ μ •λ ¬λμ–΄ μλ”μ§€ ν™•μΈ
- typeμ΄ "shared"μΈμ§€ ν™•μΈ
- status ν•„λ“ μ΅΄μ¬ ν™•μΈ

# λ¬Έμ„ κµ¬μ΅° κ²€μ¦
- "νƒ€μ… μ •μ" μ„Ήμ… μ΅΄μ¬ ν™•μΈ
- "μ‚¬μ© μΈν„°νμ΄μ¤" μ„Ήμ… μ΅΄μ¬ ν™•μΈ
```

#### 5-2. μΈν„°νμ΄μ¤μ shared_types μ°Έμ΅° κ²€μ¦
```bash
# μ–‘λ°©ν–¥ μ°Έμ΅° κ²€μ¦
- shared_typesμ— λ…μ‹λ νμΌ μ΅΄μ¬ ν™•μΈ
- ν•΄λ‹Ή κ³µμ© νƒ€μ…μ interfacesμ— ν„μ¬ μΈν„°νμ΄μ¤ ν¬ν•¨ ν™•μΈ
- κ³µμ© νƒ€μ… μ°Έμ΅° λ§ν¬ (π”— emoji) μ΅΄μ¬ ν™•μΈ
```

#### 5-3. μ—­λ°©ν–¥ μ°Έμ΅° ν™•μΈ
```bash
# κ³µμ© νƒ€μ… β†’ μΈν„°νμ΄μ¤ κ²€μ¦
- κ³µμ© νƒ€μ…μ interfacesμ— λ…μ‹λ μΈν„°νμ΄μ¤ νμΌ μ΅΄μ¬ ν™•μΈ
- ν•΄λ‹Ή μΈν„°νμ΄μ¤κ°€ κ³µμ© νƒ€μ…μ„ shared_typesμ—μ„ μ°Έμ΅°ν•λ”μ§€ ν™•μΈ
```

### validate-types.sh (νƒ€μ… μΌκ΄€μ„± κ²€μ¦)

κ³µμ© νƒ€μ…μ΄ μ‹¤μ λ΅ μΈν„°νμ΄μ¤μ—μ„ μΌκ΄€λκ² μ‚¬μ©λλ”μ§€ κ²€μ¦:

```bash
# 1. κ³µμ© νƒ€μ… μΌκ΄€μ„± κ²€μ¦
- κ³µμ© νƒ€μ… νμΌμ—μ„ νƒ€μ…λ… μ¶”μ¶
- ν•΄λ‹Ή νƒ€μ…μ΄ interfacesμ— λ…μ‹λ μΈν„°νμ΄μ¤μ—μ„ μ‚¬μ©λλ”μ§€ ν™•μΈ
- Pick<>, Omit<> λ“± μ„ νƒμ  μ‚¬μ©λ„ κ°μ§€

# 2. κ³ μ•„ κ³µμ© νƒ€μ… κ²€μ‚¬
- μ–΄λ–¤ μΈν„°νμ΄μ¤λ„ μ°Έμ΅°ν•μ§€ μ•λ” κ³µμ© νƒ€μ… νμΌ κ°μ§€
- frontmatterμ—λ” interfacesκ°€ μμ§€λ§ μ‹¤μ  μ°Έμ΅°κ°€ μ—†λ” κ²½μ°

# 3. μ¤‘λ³µ νƒ€μ… μ •μ κ²€μ‚¬
- μ—¬λ¬ μΈν„°νμ΄μ¤μ—μ„ λ™μΌν• μ΄λ¦„μ νƒ€μ…μ΄ μ •μλμ—λ”μ§€ ν™•μΈ
- κ³µμ© νƒ€μ…μΌλ΅ μ¶”μ¶ν•  ν›„λ³΄ μ μ•
```

### κ²€μ¦ μμ‹

#### validate.sh (κµ¬μ΅° κ²€μ¦)
```bash
# μ¬λ°”λ¥Έ μμ‹
$ cd tasks && bash validate.sh
5οΈβƒ£  κ³µμ© νƒ€μ… κ²€μ¦...
β… κ³µμ© νƒ€μ… κ²€μ¦ ν†µκ³Ό

# μ¤λ¥ μμ‹ 1: νμΌλ… μ •λ ¬ μ¤λ¥
β 02--03_01--02: μμ΄ μ •λ ¬λμ§€ μ•μ (μ •λ ¬ ν›„: 01--02_02--03)

# μ¤λ¥ μμ‹ 2: μ–‘λ°©ν–¥ μ°Έμ΅° λ¶μΌμΉ
β 01--02: 02--03_02--05.mdμ interfacesμ— 01--02 μ—†μ (μ–‘λ°©ν–¥ μ°Έμ΅° λ¶μΌμΉ)

# μ¤λ¥ μμ‹ 3: μ¤‘λ³µ μ
β 01--02_01--02_02--03: μ¤‘λ³µλ μ μ΅΄μ¬

# κ²½κ³  μμ‹: interfaces μ •λ ¬
β οΈ  01--02_02--03_02--05: interfacesκ°€ μ •λ ¬λμ§€ μ•μ
```

#### validate-types.sh (νƒ€μ… μΌκ΄€μ„± κ²€μ¦)
```bash
$ cd tasks && bash validate-types.sh

π” κ³µμ© νƒ€μ… μΌκ΄€μ„± κ²€μ¦...

1οΈβƒ£  κ³µμ© νƒ€μ… μΌκ΄€μ„± κ²€μ¦
  κ²€μ¦ μ¤‘: 01--02_02--03_02--05
    νƒ€μ…λ…: ImageAsset
    β… 01--02: ImageAsset μ‚¬μ© ν™•μΈ
    β… 02--03: ImageAsset μ„ νƒμ  μ‚¬μ© ν™•μΈ
    β… 02--05: ImageAsset μ‚¬μ© ν™•μΈ

2οΈβƒ£  κ³ μ•„ κ³µμ© νƒ€μ… κ²€μ‚¬

3οΈβƒ£  μ¤‘λ³µ νƒ€μ… μ •μ κ²€μ‚¬
  μ¤‘λ³µ νƒ€μ… μ •μ κ²€μ‚¬...

β… νƒ€μ… μΌκ΄€μ„± κ²€μ¦ μ™„λ£
```

### ν†µν•© κ²€μ¦ μ›ν¬ν”λ΅μ°

```bash
# λ‹¨κ³„λ³„ κ²€μ¦
cd tasks

# 1. κµ¬μ΅° κ²€μ¦ (ν•„μ)
bash validate.sh

# 2. νƒ€μ… μΌκ΄€μ„± κ²€μ¦ (κ¶μ¥)
bash validate-types.sh

# 3. λ¨λ“  κ²€μ¦ ν†µν•© μ‹¤ν–‰
bash validate.sh && bash validate-types.sh
```

## ν™•μ¥ μ‹λ‚λ¦¬μ¤

### κΈ°μ΅΄ κ³µμ© νƒ€μ…μ— μΈν„°νμ΄μ¤ μ¶”κ°€
```
# κΈ°μ΅΄: 01--02_02--03.md (ImageAsset)
# μƒλ΅ μ¶”κ°€: 03--04λ„ ImageAsset μ‚¬μ©

# νμΌλ… λ³€κ²½: 01--02_02--03_03--04.md
# frontmatter μ—…λ°μ΄νΈ:
interfaces:
  - "01--02"
  - "02--03"
  - "03--04"
```

### κ³µμ© νƒ€μ… λ¶„λ¦¬
```
# κΈ°μ΅΄: 01--02_02--03.md (ImageAsset + CanvasConfig)
# λ¶„λ¦¬ ν•„μ”: ImageAssetλ§ κ³µμ , CanvasConfigλ” 02--03 μ „μ©

# μƒλ΅ μƒμ„±: 01--02_02--03.md (ImageAssetλ§)
# 02--03.md: CanvasConfigλ” κ°λ³„ μ •μλ΅ λ³µμ›
```

## μμ‹

### μ‹¤μ  ν”„λ΅μ νΈ μ μ©

**Case 1: ImageAsset**
```
μ‚¬μ©μ²:
- 01--02 (ProjectManagement β†’ ImageLibrary): extractAndSaveImages λ°ν™
- 02--03 (ImageLibrary β†’ Canvas): λ“λκ·Έ λ°μ΄ν„°
- 02--05 (ImageLibrary β†’ Database): μ €μ¥ λ°μ΄ν„°

β†’ 01--02_02--03_02--05.md μƒμ„±
```

**Case 2: LayerNode** (μ‹¤μ  κµ¬ν„λ¨)
```
μ‚¬μ©μ²:
- 03--04 (Canvas β†’ LayerPanel): λ μ΄μ–΄ κµ¬μ΅° μ „λ‹¬
- 04--03 (LayerPanel β†’ Canvas): λ μ΄μ–΄ μ—…λ°μ΄νΈ
- 06--05 (CanvasData β†’ Database): λ μ΄μ–΄ μ €μ¥

β†’ 03--04_06--05.md μƒμ„±λ¨ (2025-10-22)

νƒ€μ… μ •μ:
interface LayerNode {
  id: string;           // UUID v4
  type: LayerType;      // 'image' | 'group'
  name: string;
  visible: boolean;
  locked: boolean;
  style: ElementStyle;
  imageRef?: string;    // ImageAsset ID μ°Έμ΅°
  parent?: string;      // λ¶€λ¨ λ μ΄μ–΄ ID
  children: string[];   // μμ‹ λ μ΄μ–΄ ID λ°°μ—΄
}

μ°Έμ΅° λ°©λ²•:
- features/03_Canvas.md: shared_types: ["03--04_06--05"]
- features/04_LayerPanel.md: shared_types: ["03--04_06--05"]
- features/06_CanvasData.md: shared_types: ["03--04_06--05"]
- interfaces/03--04.md: shared_types: ["03--04_06--05"]
- interfaces/04--03.md: shared_types: ["03--04_06--05"]
- interfaces/06--05.md: shared_types: ["03--04_06--05"]
```

## λ‹¨μΌ μ§„μ‹¤ μ›μ² (SSOT) μ μ© κ°€μ΄λ“

### κ°μ”

κ³µμ© νƒ€μ…μ€ **λ‹¨ ν•λ‚μ μ¥μ†**μ—μ„λ§ μ •μλμ–΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄:
- νƒ€μ… λ³€κ²½ μ‹ λ‹¨μΌ μ§€μ λ§ μμ •
- λ¬Έμ„ κ°„ λ¶μΌμΉ λ°©μ§€
- μ μ§€λ³΄μ λ¶€λ‹΄ κ°μ†
- κ²€μ¦ μ¤ν¬λ¦½νΈλ΅ μΌκ΄€μ„± μλ™ ν™•μΈ

### μ •μμ™€ μ°Έμ΅°μ κµ¬λ¶„

**μ •μ (Definition):**
- **μ„μΉ**: `shared/` λ””λ ‰ν† λ¦¬μ—μ„λ§
- **λ‚΄μ©**: μ™„μ „ν• TypeScript νƒ€μ… μ •μ + μ£Όμ„ + κ²€μ¦ κ·μΉ™
- **μμ‹**: `shared/03--04_06--05.md`μ—μ„ LayerNode μ™„μ „ μ •μ

**μ°Έμ΅° (Reference):**
- **μ„μΉ**: `features/`, `interfaces/` λ””λ ‰ν† λ¦¬μ—μ„
- **λ‚΄μ©**: Frontmatter `shared_types` + λ§ν¬ (`π”—`)
- **μμ‹**: `features/03_Canvas.md`μ—μ„ LayerNode μ°Έμ΅°

### μ¬λ°”λ¥Έ μ°Έμ΅° ν¨ν„΄

#### 1. Frontmatter μ„¤μ •
```markdown
---
shared_types:
  - "03--04_06--05"
---
```

#### 2. λ¬Έμ„ λ‚΄ μ°Έμ΅° λ§ν¬
```markdown
## νƒ€μ… μ •μ

> π”— **κ³µμ© νƒ€μ…**: `LayerNode`λ” [../shared/03--04_06--05.md](../shared/03--04_06--05.md) μ°Έμ΅°
```

#### 3. μΈν„°νμ΄μ¤ νΉν™” νƒ€μ…λ§ μ •μ
```typescript
// β… μ¬λ°”λ¥Έ ν¨ν„΄: μΈν„°νμ΄μ¤ νΉν™” νƒ€μ…λ§ μ •μ
interface CanvasConfig {
  width: number;
  height: number;
  zoom: number;
}

// LayerNodeλ” μ°Έμ΅°λ§ (μ •μ X)
```

### μλ»λ ν¨ν„΄κ³Ό μμ •

#### β ν¨ν„΄ 1: μ¤‘λ³µ μ •μ
```markdown
<!-- features/03_Canvas.md -->
## νƒ€μ… μ •μ

```typescript
interface LayerNode {
  id: string;
  type: LayerType;
  // ...
}
```
```

**λ¬Έμ **: LayerNodeκ°€ `shared/03--04_06--05.md`μ—λ„ μ •μλ¨ β†’ μ¤‘λ³µ

**μμ •**:
```markdown
<!-- features/03_Canvas.md -->
---
shared_types:
  - "03--04_06--05"
---

## νƒ€μ… μ •μ

> π”— **κ³µμ© νƒ€μ…**: `LayerNode`λ” [../shared/03--04_06--05.md](../shared/03--04_06--05.md) μ°Έμ΅°

### Canvas νΉν™” νƒ€μ…
```typescript
interface CanvasConfig {
  // Canvasλ§μ νƒ€μ…
}
```
```

#### β ν¨ν„΄ 2: λ¶€λ¶„ μ •μ
```markdown
<!-- interfaces/03--04.md -->
```typescript
// κ°„λ‹¨ν• LayerNode μ •μ
interface LayerNode {
  id: string;
  name: string;
}
```
```

**λ¬Έμ **: κ³µμ© νƒ€μ…μ μΌλ¶€λ§ λ³µμ‚¬ β†’ λ¶μ™„μ „

**μμ •**: μ „μ²΄λ¥Ό μ°Έμ΅°λ΅ λ€μ²΄

#### β ν¨ν„΄ 3: Frontmatter λ„λ½
```markdown
<!-- features/04_LayerPanel.md -->
<!-- shared_types μ—†μ -->

## νƒ€μ… μ •μ

LayerNodeλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
```

**λ¬Έμ **: κΈ°κ³„ κ°€λ… μ°Έμ΅° μ—†μ β†’ κ²€μ¦ μ¤ν¬λ¦½νΈ μ‹¤ν¨

**μμ •**: Frontmatter μ¶”κ°€

### κΈ°μ΅΄ μ¤‘λ³µ μ κ±° ν”„λ΅μ„Έμ¤

**μƒν™©**: LayerNodeκ°€ 3κ° νμΌμ— μ¤‘λ³µ μ •μλ¨
- `features/03_Canvas.md`
- `features/04_LayerPanel.md`
- `features/06_CanvasData.md`

**λ‹¨κ³„:**

1. **κ³µμ© νƒ€μ… νμΌ μƒμ„±**
   ```bash
   # shared/03--04_06--05.md μƒμ„±
   ```

2. **νƒ€μ… μ •μ μ΄λ™**
   - κ°€μ¥ μ™„μ „ν• μ •μλ¥Ό `shared/03--04_06--05.md`λ΅ λ³µμ‚¬
   - Frontmatterμ— interfaces λ…μ‹
   - μ‚¬μ© μΈν„°νμ΄μ¤, λ¶λ³€ κ·μΉ™ λ“± λ¬Έμ„ν™”

3. **κΈ°λ¥ λ¬Έμ„ μ—…λ°μ΄νΈ**
   ```markdown
   <!-- features/03_Canvas.md -->
   ---
   shared_types:
     - "03--04_06--05"
   ---

   > π”— **κ³µμ© νƒ€μ…**: `LayerNode`λ” [../shared/03--04_06--05.md](../shared/03--04_06--05.md) μ°Έμ΅°

   <!-- LayerNode μ •μ μ‚­μ  -->
   ```

4. **μΈν„°νμ΄μ¤ λ¬Έμ„ μ—…λ°μ΄νΈ**
   ```markdown
   <!-- interfaces/03--04.md -->
   ---
   shared_types:
     - "03--04_06--05"
   ---

   > π”— **κ³µμ© νƒ€μ…**: `LayerNode`λ” [../shared/03--04_06--05.md](../shared/03--04_06--05.md) μ°Έμ΅°

   <!-- LayerNode μ •μ μ‚­μ  -->
   ```

5. **κ²€μ¦**
   ```bash
   cd tasks
   bash validate.sh
   bash validate-types.sh
   ```

### κ²€μ¦ κ·μΉ™

**validate.shκ°€ ν™•μΈν•λ” μ‚¬ν•­:**
- Frontmatter `shared_types` μ΅΄μ¬ μ—¬λ¶€
- μ°Έμ΅° νμΌ μ‹¤μ  μ΅΄μ¬
- μ–‘λ°©ν–¥ μ°Έμ΅° μΌκ΄€μ„± (κ³µμ© νƒ€μ… β†” μΈν„°νμ΄μ¤)
- π”— μ°Έμ΅° λ§ν¬ μ΅΄μ¬

**validate-types.shκ°€ ν™•μΈν•λ” μ‚¬ν•­:**
- μ¤‘λ³µ νƒ€μ… μ •μ κ°μ§€
- κ³µμ© νƒ€μ… μ‹¤μ  μ‚¬μ© ν™•μΈ
- κ³ μ•„ κ³µμ© νƒ€μ… κ²€μ‚¬

### μμ™Έ μƒν™©

#### 1. νƒ€μ… ν™•μ¥μ΄ ν•„μ”ν• κ²½μ°
```typescript
// β… μ¬λ°”λ¥Έ ν¨ν„΄
// shared/03--04_06--05.mdμ LayerNode μ°Έμ΅°
type ExtendedLayerNode = LayerNode & {
  customMetadata: string;
};
```
β†’ κΈ°λ³Έ νƒ€μ…μ€ κ³µμ©, ν™•μ¥μ€ κ°λ³„ λ¬Έμ„μ—μ„ μ •μ

#### 2. μΈν„°νμ΄μ¤ νΉν™” νƒ€μ…
```typescript
// β… μ¬λ°”λ¥Έ ν¨ν„΄
// 03--04.mdμ—μ„λ§ μ‚¬μ©ν•λ” νƒ€μ…
interface DragStartEvent {
  imageAsset: Pick<ImageAsset, 'id' | 'name'>;  // κ³µμ© νƒ€μ… μ°Έμ΅°
  position: { x: number; y: number };            // μΈν„°νμ΄μ¤ νΉν™”
}
```
β†’ κ³µμ© νƒ€μ…μ€ μ°Έμ΅°, μΈν„°νμ΄μ¤λ§μ νƒ€μ…μ€ μ •μ

### μ²΄ν¬λ¦¬μ¤νΈ

κ³µμ© νƒ€μ… μƒμ„± μ‹:
- [ ] `shared/` λ””λ ‰ν† λ¦¬μ— νμΌ μƒμ„±
- [ ] μ™„μ „ν• νƒ€μ… μ •μ μ‘μ„±
- [ ] Frontmatterμ— `interfaces` λ…μ‹
- [ ] μ‚¬μ© μΈν„°νμ΄μ¤ μ„Ήμ… μ‘μ„±
- [ ] λ¶λ³€ κ·μΉ™ λ° κ²€μ¦ μ΅°κ±΄ μ‘μ„±

μ°Έμ΅° μ¶”κ°€ μ‹:
- [ ] Frontmatterμ— `shared_types` μ¶”κ°€
- [ ] π”— μ°Έμ΅° λ§ν¬ μ¶”κ°€
- [ ] κΈ°μ΅΄ νƒ€μ… μ •μ μ κ±°
- [ ] validate.sh μ‹¤ν–‰
- [ ] validate-types.sh μ‹¤ν–‰

## μ—£μ§€ μΌ€μ΄μ¤ λ° ν•΄κ²° λ°©λ²•

### Case 1: νƒ€μ… ν™•μ¥ (Extension)
**μƒν™©**: μΈν„°νμ΄μ¤ Aλ” `ImageAsset` μ „μ²΄ μ‚¬μ©, μΈν„°νμ΄μ¤ Bλ” `ImageAsset & { metadata: string }` μ‚¬μ©

**ν•΄κ²°**: κ³µμ© νƒ€μ…μ€ κΈ°λ³Έ `ImageAsset`λ§ κ΄€λ¦¬, ν™•μ¥ νƒ€μ…μ€ κ° μΈν„°νμ΄μ¤μ—μ„ κ°λ³„ μ •μ
```typescript
// shared/01--02_02--05.md
interface ImageAsset { ... }

// interfaces/03--04.md
type ExtendedImageAsset = ImageAsset & { metadata: string };
```

### Case 2: νƒ€μ… λ³€ν™ (Transformation)
**μƒν™©**: μΈν„°νμ΄μ¤ Aλ” `ImageAsset` μ‚¬μ©, μΈν„°νμ΄μ¤ Bλ” `Omit<ImageAsset, 'blob'> & { url: string }` μ‚¬μ©

**ν•΄κ²°**: μ›μ²μ΄ κ°™μ§€λ§ λ³€ν™μ΄ μμΌλ―€λ΅ λ³„λ„ νƒ€μ…μΌλ΅ κ΄€λ¦¬
```typescript
// interfaces/04--05.md
// ImageAssetμ„ λ³€ν™ν•μ—¬ μ‚¬μ©ν•μ§€λ§, λ³„λ„ νƒ€μ…μΌλ΅ μ •μ
interface SerializedImageAsset {
  id: string;
  projectId: string;
  // ... blob μ μ™Έ
  url: string;  // blob β†’ url λ³€ν™
}
```

### Case 3: λ¶€λ¶„ μ§‘ν•©μ λ¶€λ¶„ μ§‘ν•©
**μƒν™©**:
- 01--02: `ImageAsset` μ „μ²΄ μ‚¬μ©
- 02--03: `Pick<ImageAsset, 'id' | 'name' | 'width' | 'height' | 'blob'>` μ‚¬μ©
- 03--04: `Pick<ImageAsset, 'id' | 'name'>` μ‚¬μ© (02--03μ λ¶€λ¶„ μ§‘ν•©)

**ν•΄κ²°**: λ¨λ‘ λ™μΌ μ›μ²μ΄λ―€λ΅ ν•λ‚μ κ³µμ© νƒ€μ…μΌλ΅ κ΄€λ¦¬
```markdown
# shared/01--02_02--03_03--04.md

## μ‚¬μ© μΈν„°νμ΄μ¤
- **01--02**: μ „μ²΄ ν•„λ“ μ‚¬μ©
- **02--03**: μ„ νƒμ  ν•„λ“ (`id`, `name`, `width`, `height`, `blob`)
- **03--04**: μµμ† ν•„λ“ (`id`, `name`)
```

### Case 4: μν™ μ°Έμ΅° κ°€λ¥μ„±
**μƒν™©**: Aβ†’B, Bβ†’C, Cβ†’A ν•νƒλ΅ μΈν„°νμ΄μ¤κ°€ μν™ μ°Έμ΅°ν•λ©° κ³µμ© νƒ€μ… κ³µμ 

**ν•΄κ²°**: κ³µμ© νƒ€μ…μ€ μν™ μ°Έμ΅°μ™€ λ¬΄κ΄€. κ° μΈν„°νμ΄μ¤ μμ΄ λ…λ¦½μ μΌλ΅ νƒ€μ… κ³µμ 
```markdown
# Aβ†’Bμ™€ Bβ†’Cκ°€ Type1 κ³µμ , Cβ†’Aμ™€ Aβ†’Bκ°€ Type2 κ³µμ  κ°€λ¥
# shared/01--02_02--03.md (Type1)
# shared/01--02_03--01.md (Type2)
```

### Case 5: λ‹¤μ¤‘ κ³µμ© νƒ€μ… μ°Έμ΅°
**μƒν™©**: ν•λ‚μ μΈν„°νμ΄μ¤κ°€ μ—¬λ¬ κ³µμ© νƒ€μ… μ°Έμ΅°

**ν•΄κ²°**: `shared_types` λ°°μ—΄μ— λ¨λ‘ λ…μ‹
```markdown
---
shared_types:
  - "01--02_02--03_02--05"  # ImageAsset
  - "01--03_03--04"         # LayerNode
---
```

## νƒ€μ… μ΄λ¦„ μ¤‘λ³µ μ²λ¦¬

### μ›μΉ™: κ°™μ€ μ΄λ¦„, λ‹¤λ¥Έ μ›μ² = μ΄λ¦„ λ³€κ²½ ν•„μ

λ™μΌν• νƒ€μ…λ…μ΄ μ—¬λ¬ μΈν„°νμ΄μ¤μ—μ„ λ°κ²¬λμ—μ„ λ•:

**1. λ™μΌ μ›μ² ν™•μΈ (κ³µμ© νƒ€μ…μΌλ΅ μ¶”μ¶)**
```typescript
// 03--04.md
interface LayerNode {
  id: string;
  type: 'image' | 'group';
  name: string;
  // ...
}

// 06--05.md (μ™„μ „ν λ™μΌ)
interface LayerNode {
  id: string;
  type: 'image' | 'group';
  name: string;
  // ...
}

// β… κ°™μ€ μ›μ² β†’ κ³µμ© νƒ€μ…μΌλ΅ μ¶”μ¶
// shared/03--04_06--05.md μƒμ„±
```

**2. λ‹¤λ¥Έ μ›μ² ν™•μΈ (μ΄λ¦„ λ³€κ²½)**
```typescript
// 03--04.md (Canvasμ λ μ΄μ–΄)
interface LayerNode {
  id: string;
  type: 'image' | 'group';
  canvasPosition: { x: number; y: number };
}

// 07--08.md (Exportμ λ μ΄μ–΄ - λ‹¤λ¥Έ κµ¬μ΅°)
interface LayerNode {
  id: string;
  format: 'png' | 'svg';
  exportPath: string;
}

// β κ°™μ€ μ΄λ¦„, λ‹¤λ¥Έ μ›μ² β†’ μ΄λ¦„ λ³€κ²½ ν•„μ”
// 03--04.md: CanvasLayerNode
// 07--08.md: ExportLayerNode
```

### μ΄λ¦„ λ³€κ²½ κ·μΉ™

**λ„¤μ΄λ° ν¨ν„΄:**
```typescript
// ν¨ν„΄ 1: λ„λ©”μΈ μ ‘λ‘μ‚¬
interface CanvasLayerNode { ... }      // Canvas λ„λ©”μΈ
interface DatabaseLayerNode { ... }    // Database λ„λ©”μΈ
interface ExportLayerNode { ... }      // Export λ„λ©”μΈ

// ν¨ν„΄ 2: μ©λ„ μ ‘λ‘μ‚¬
interface DisplayLayer { ... }         // ν™”λ©΄ ν‘μ‹μ©
interface StorageLayer { ... }         // μ €μ¥μ©
interface TransferLayer { ... }        // μ „μ†΅μ©

// ν¨ν„΄ 3: κµ¬μ²΄μ  λ…μ‚¬
interface ImageLayer { ... }           // μ΄λ―Έμ§€ λ μ΄μ–΄
interface GroupLayer { ... }           // κ·Έλ£Ή λ μ΄μ–΄
interface EffectLayer { ... }          // μ΄ν™νΈ λ μ΄μ–΄
```

**λ³€κ²½ μ μ°¨:**
1. μ›μ² λ¶„μ„: νƒ€μ…μ΄ μ–΄λ””μ„ μ λν–λ”μ§€ ν™•μΈ
2. μλ―Έ νμ•…: κ° νƒ€μ…μ΄ λ‚νƒ€λ‚΄λ” κ°λ… μ΄ν•΄
3. μ΄λ¦„ μ„ νƒ: λ„λ©”μΈ/μ©λ„/κµ¬μ²΄μ„±μ„ λ°μν• μ΄λ¦„
4. μ „μ—­ λ³€κ²½: ν•΄λ‹Ή μΈν„°νμ΄μ¤ λ‚΄ λ¨λ“  μ°Έμ΅° μ—…λ°μ΄νΈ
5. λ¬Έμ„ν™”: λ³€κ²½ μ΄μ λ¥Ό μΈν„°νμ΄μ¤ λ¬Έμ„μ— μ£Όμ„ μ¶”κ°€

**μμ‹:**
```typescript
// Before (μ¤‘λ³µ)
// interfaces/03--04.md
interface LayerNode { ... }

// interfaces/06--05.md
interface LayerNode { ... }

// After (κµ¬λ¶„) - λ§μ•½ λ‹¤λ¥Έ μ›μ²μ΄μ—λ‹¤λ©΄
// interfaces/03--04.md
/**
 * Canvas λ λ”λ§μ„ μ„ν• λ μ΄μ–΄ λ…Έλ“
 * (μ΄μ „λ…: LayerNode - 06--05μ StorageLayerNodeμ™€ κµ¬λ¶„ν•κΈ° μ„ν•΄ λ³€κ²½)
 */
interface CanvasLayerNode { ... }

// interfaces/06--05.md
/**
 * Database μ €μ¥μ„ μ„ν• λ μ΄μ–΄ λ…Έλ“
 * (μ΄μ „λ…: LayerNode - 03--04μ CanvasLayerNodeμ™€ κµ¬λ¶„ν•κΈ° μ„ν•΄ λ³€κ²½)
 */
interface StorageLayerNode { ... }
```

### νλ‹¨ κΈ°μ¤€

| ν•­λ© | κ°™μ€ μ›μ² (κ³µμ© νƒ€μ…) | λ‹¤λ¥Έ μ›μ² (μ΄λ¦„ λ³€κ²½) |
|------|---------------------|---------------------|
| **ν•„λ“ κµ¬μ΅°** | 100% λ™μΌ λλ” λ¶€λ¶„ μ§‘ν•© | λ‹¤λ¥Έ ν•„λ“ ν¬ν•¨ |
| **μλ―Έ** | λ™μΌν• κ°λ… | λ‹¤λ¥Έ κ°λ… |
| **μ›μ²** | κ°™μ€ λ°μ΄ν„° μ†μ¤ | λ‹¤λ¥Έ λ°μ΄ν„° μ†μ¤ |
| **λ³€ν™** | μ—†μ λλ” Pick/Omit | ν•„λ“ λ³€ν™/μ¶”κ°€ |
| **μ΅°μΉ** | κ³µμ© νƒ€μ… μ¶”μ¶ | νƒ€μ…λ… λ³€κ²½ |

## μ£Όμμ‚¬ν•­

1. **λ‹¨μΌ μ§„μ‹¤ μ›μ² (SSOT) μ¤€μ**: κ³µμ© νƒ€μ…μ€ `shared/` λ””λ ‰ν† λ¦¬μ—μ„λ§ μ •μ, κΈ°λ¥/μΈν„°νμ΄μ¤ λ¬Έμ„λ” μ°Έμ΅°λ§
2. **μ¤‘λ³µ μ •μ μ λ€ κΈμ§€**: κ°™μ€ νƒ€μ…μ„ μ—¬λ¬ κ³³μ—μ„ μ •μν•λ©΄ validate.sh κ²€μ¦ μ‹¤ν¨
3. **κ³Όλ„ν• μ¶”μƒν™” κΈμ§€**: μ μ‚¬ν•΄ λ³΄μ—¬λ„ μλ―Έκ°€ λ‹¤λ¥΄λ©΄ λ³„λ„ νƒ€μ… μ μ§€
4. **νƒ€μ…λ… μ¤‘λ³µ κΈμ§€**: κ°™μ€ μ΄λ¦„μ΄ λ‹¤λ¥Έ μ›μ²μ— μ‚¬μ©λλ©΄ λ°λ“μ‹ κµ¬λ¶„
5. **λ²„μ „ κ΄€λ¦¬**: κ³µμ© νƒ€μ… λ³€κ²½ μ‹ λ¨λ“  μ°Έμ΅° μΈν„°νμ΄μ¤ μν–¥ ν™•μΈ ν•„μ
6. **λ¬Έμ„ λ™κΈ°ν™”**: κ³µμ© νƒ€μ… μƒμ„±/μμ • μ‹ κ΄€λ ¨ μΈν„°νμ΄μ¤ λ¬Έμ„ μ¦‰μ‹ μ—…λ°μ΄νΈ
7. **μ–‘λ°©ν–¥ μ°Έμ΅° μΌκ΄€μ„±**: κ³µμ© νƒ€μ…κ³Ό μΈν„°νμ΄μ¤μ μ°Έμ΅°κ°€ ν•­μƒ μΌμΉν•΄μ•Ό ν•¨
8. **νμΌλ… μ •λ ¬**: κ³µμ© νƒ€μ… νμΌλ…μ μμ€ λ°λ“μ‹ μ•νλ²³μ μ •λ ¬
9. **μ›μ² μ¶”μ **: μ„ νƒμ  ν•„λ“ μ‚¬μ© μ‹ μ›μ² νƒ€μ…μ„ λ…μ‹ν•μ—¬ μ¶”μ  κ°€λ¥ν•κ² μ μ§€
10. **κ²€μ¦ ν•„μ**: κ³µμ© νƒ€μ… μƒμ„±/μμ • ν›„ λ°λ“μ‹ `validate.sh && validate-types.sh` μ‹¤ν–‰

## νΈλ¬λΈ”μν…

### λ¬Έμ  1: κ³µμ© νƒ€μ… νμΌλ… μ¤λ¥
```bash
# μ¤λ¥: 02--03_01--02.md
# ν•΄κ²°: 01--02_02--03.md (μ •λ ¬ ν•„μ”)

# μ •λ ¬ μ¤ν¬λ¦½νΈ
IFS='_' read -ra PAIRS <<< "02--03_01--02"
sorted=($(printf '%s\n' "${PAIRS[@]}" | sort))
echo "${sorted[@]}" | tr ' ' '_'  # μ¶λ ¥: 01--02_02--03
```

### λ¬Έμ  2: μ–‘λ°©ν–¥ μ°Έμ΅° λ¶μΌμΉ
```bash
# μ¤λ¥:
# shared/01--02_02--03.mdμ interfacesμ— "01--02"λ§ μμ
# interfaces/02--03.mdμ shared_typesμ— "01--02_02--03" μμ

# ν•΄κ²°: shared/01--02_02--03.mdμ— "02--03" μ¶”κ°€
interfaces:
  - "01--02"
  - "02--03"  # μ¶”κ°€
```

### λ¬Έμ  3: λ™μΌ μ›μ² νλ‹¨ κΈ°μ¤€ λ¨νΈ
```bash
# μ§λ¬Έ: μ΄ λ‘ νƒ€μ…μ΄ κ°™μ€ μ›μ²μΈκ°€?
# A: Pick<ImageAsset, 'id' | 'name'>
# B: { id: string; name: string }

# νλ‹¨ κΈ°μ¤€:
# 1. Aλ” λ…μ‹μ μΌλ΅ ImageAsset μ°Έμ΅° β†’ κ³µμ© νƒ€μ…
# 2. Bλ” μ°μ—°ν κµ¬μ΅°κ°€ κ°™μ β†’ λ³„λ„ νƒ€μ…
# 3. λ¬Έμ„/μ£Όμ„μ—μ„ μ›μ² λ…μ‹ μ—¬λ¶€ ν™•μΈ
```

### λ¬Έμ  4: κ³µμ© νƒ€μ… ν™•μ¥ μ‹ νμΌλ… λ³€κ²½
```bash
# κΈ°μ΅΄: 01--02_02--05.md
# μ¶”κ°€: 02--03λ„ κ°™μ€ νƒ€μ… μ‚¬μ©
# μƒ νμΌλ…: 01--02_02--03_02--05.md

# μ μ°¨:
# 1. μƒ νμΌ μƒμ„±: shared/01--02_02--03_02--05.md
# 2. κΈ°μ΅΄ νμΌ λ‚΄μ© λ³µμ‚¬ + interfaces μ¶”κ°€
# 3. λ¨λ“  μ°Έμ΅° μΈν„°νμ΄μ¤ μ—…λ°μ΄νΈ (01--02, 02--03, 02--05)
# 4. κΈ°μ΅΄ νμΌ μ‚­μ : shared/01--02_02--05.md
# 5. validate.sh μ‹¤ν–‰ν•μ—¬ κ²€μ¦
```

## λΉ λ¥Έ μ°Έμ΅° (Quick Reference)

### κ³µμ© νƒ€μ… μƒμ„± μ²΄ν¬λ¦¬μ¤νΈ

- [ ] 1. νƒ€μ… μ¤‘λ³µ/μ›μ² μ‹λ³„
  - [ ] κµ¬μ΅°μ  100% μΌμΉ ν™•μΈ
  - [ ] λλ” λ™μΌ μ›μ² λ°μ΄ν„° ν™•μΈ (Pick<> μ‚¬μ© ν¬ν•¨)
- [ ] 2. νμΌλ… μƒμ„±
  - [ ] `XX--YY_YY--ZZ.md` ν•μ‹
  - [ ] μ•νλ²³μ μ •λ ¬ ν™•μΈ
  - [ ] `_` κµ¬λ¶„μ μ‚¬μ©
- [ ] 3. κ³µμ© νƒ€μ… λ¬Έμ„ μ‘μ„±
  - [ ] frontmatter: `interfaces`, `type: "shared"`, `status`
  - [ ] "μ‚¬μ© μΈν„°νμ΄μ¤" μ„Ήμ… (μ‚¬μ© λ°©μ‹ λ…μ‹)
  - [ ] "νƒ€μ… μ •μ" μ„Ήμ… (μ£Όμ„ ν¬ν•¨)
  - [ ] "μ„ νƒμ  ν•„λ“ μ‚¬μ©" μ„Ήμ… (ν•΄λ‹Ή μ‹)
  - [ ] "λ¶λ³€ κ·μΉ™" λ° "κ²€μ¦ μ΅°κ±΄"
- [ ] 4. μΈν„°νμ΄μ¤ λ¬Έμ„ μ—…λ°μ΄νΈ
  - [ ] frontmatterμ— `shared_types` μ¶”κ°€
  - [ ] π”— μ°Έμ΅° λ§ν¬ μ¶”κ°€
  - [ ] μ¤‘λ³µ νƒ€μ… μ •μ μ κ±°
  - [ ] Pick<> μ‚¬μ© μ‹ λ…μ‹
- [ ] 5. κ²€μ¦
  - [ ] `bash validate.sh` μ‹¤ν–‰
  - [ ] `bash validate-types.sh` μ‹¤ν–‰
  - [ ] λ¨λ“  μ¤λ¥ ν•΄κ²°

### λ…λ Ήμ–΄ μ”μ•½

```bash
# κ²€μ¦ (ν•„μ)
cd tasks && bash validate.sh

# νƒ€μ… μΌκ΄€μ„± κ²€μ¦ (κ¶μ¥)
cd tasks && bash validate-types.sh

# μ „μ²΄ κ²€μ¦
cd tasks && bash validate.sh && bash validate-types.sh

# νμΌλ… μ •λ ¬ ν™•μΈ
IFS='_' read -ra PAIRS <<< "νμΌλ…"
printf '%s\n' "${PAIRS[@]}" | sort

# νΉμ • νƒ€μ… μ‚¬μ©μ² κ²€μƒ‰
grep -r "ImageAsset" interfaces/
```

### μΌλ°μ μΈ ν¨ν„΄

#### ν¨ν„΄ 1: μ „μ²΄ ν•„λ“ μ‚¬μ©
```markdown
# interfaces/01--02.md
> π”— **κ³µμ© νƒ€μ…**: `ImageAsset`μ€ [01--02_02--03_02--05.md](../shared/01--02_02--03_02--05.md) μ°Έμ΅°
```

#### ν¨ν„΄ 2: μ„ νƒμ  ν•„λ“ μ‚¬μ©
```markdown
# interfaces/02--03.md
> π”— **κ³µμ© νƒ€μ…**: `ImageAsset`μ€ [01--02_02--03_02--05.md](../shared/01--02_02--03_02--05.md) μ°Έμ΅°
> **μ„ νƒμ  μ‚¬μ©**: `id`, `name`, `width`, `height`, `blob` ν•„λ“λ§ μ‚¬μ©

```typescript
interface DragStartEvent {
  imageAsset: Pick<ImageAsset, 'id' | 'name' | 'width' | 'height' | 'blob'>;
}
```
```

#### ν¨ν„΄ 3: νƒ€μ… ν™•μ¥
```typescript
// κ³µμ© νƒ€μ…μ€ κΈ°λ³Έλ§, ν™•μ¥μ€ κ°λ³„ μ •μ
type ExtendedImageAsset = ImageAsset & { metadata: string };
```

### μμ£Όν•λ” μ‹¤μ

1. β νμΌλ… μ •λ ¬ μ• ν•¨: `02--03_01--02.md`
   - β… μ¬λ°”λ¥Έ ν•μ‹: `01--02_02--03.md`

2. β μ–‘λ°©ν–¥ μ°Έμ΅° λ„λ½
   - β… κ³µμ© νƒ€μ…μ `interfaces`μ™€ μΈν„°νμ΄μ¤μ `shared_types` λ¨λ‘ μ—…λ°μ΄νΈ

3. β μ°μ—°ν κµ¬μ΅°κ°€ κ°™μ€ νƒ€μ…μ„ κ³µμ©μΌλ΅ μ¶”μ¶
   - β… μ›μ²μ΄ κ°™μ€μ§€ ν™•μΈ (μλ―Έμ  λ™μΌμ„±)

4. β Pick<> μ‚¬μ©μ„ λ³„λ„ νƒ€μ…μΌλ΅ κ°„μ£Ό
   - β… κ°™μ€ μ›μ²μ΄λ©΄ κ³µμ© νƒ€μ…μΌλ΅ κ΄€λ¦¬

5. β κ³µμ© νƒ€μ… μμ • ν›„ μ°Έμ΅° μΈν„°νμ΄μ¤ λ―Έν™•μΈ
   - β… μν–¥λ°›λ” λ¨λ“  μΈν„°νμ΄μ¤ κ²€ν†  ν•„μ
